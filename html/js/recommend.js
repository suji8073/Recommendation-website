var recommendation_list = [
  [
    "https://apps.apple.com/kr/app/%EC%82%B0%ED%83%80-ai-%ED%86%A0%EC%9D%B5/id1148006701",
    "https://play.google.com/store/apps/details?id=co.riiid.vida",
  ],

  [
    "https://apps.apple.com/us/app/super-chinese-learn-chinese/id1462500984",
    "https://play.google.com/store/apps/details?id=com.superchinese",
  ],
  [
    "https://apps.apple.com/us/app/%ED%94%8C%EB%9E%AD-al-%EC%98%81%EC%96%B4%ED%9A%8C%ED%99%94-%EC%8A%A4%ED%94%BC%ED%82%B9-%EB%B0%9C%EC%9D%8C/id1384279650",
    "https://play.google.com/store/apps/details?id=co.aienglish",
  ],
  [
    "https://apps.apple.com/kr/app/%EC%98%A4%ED%94%BD-1%EC%9C%84-%EC%98%A4%ED%94%BD%EC%97%85/id1475710765",
    "https://play.google.com/store/apps/details?id=com.hue6.opicup",
  ],
  [
    "https://apps.apple.com/us/app/lingochamp-ai-english-coach/id1460991582",
    "https://play.google.com/store/apps/details?id=com.laix.lingochamp&hl=ko&gl=US",
  ],
  [
    "https://apps.apple.com/kr/app/%EC%9D%B4%EC%A7%80%EB%B3%B4%EC%B9%B4-%EC%98%81%EC%96%B4%EB%8B%A8%EC%96%B4-%EC%96%B4%EC%9B%90%EC%9D%84-%EC%9D%BD%EC%96%B4%EC%A3%BC%EB%8A%94-%ED%8A%B9%EB%B3%84%ED%95%9C-%EB%8B%A8%EC%96%B4%EC%9E%A5/id1454492537",
    "https://play.google.com/store/apps/details?id=com.shouter.easyvoca",
  ],
  [
    "https://apps.apple.com/kr/app/%EB%A7%90%ED%95%B4%EB%B3%B4%EC%B9%B4-%EC%98%81%EB%8B%A8%EC%96%B4-%EB%A6%AC%EC%8A%A4%EB%8B%9D-%EC%8A%A4%ED%94%BC%ED%82%B9-%EC%98%81%EC%96%B4%ED%9A%8C%ED%99%94-%ED%95%84%EC%88%98%EC%95%B1/id1460766549",
    "https://play.google.com/store/search?q=%EB%A7%90%ED%95%B4%EB%B3%B4%EC%B9%B4&c=apps",
  ],
  [
    "https://apps.apple.com/kr/app/youbot-%EB%AC%B8%EC%A0%95%EC%95%84%EC%A4%91%EA%B5%AD%EC%96%B4/id1467944660",
    "https://play.google.com/store/apps/details?id=com.youbot.moon",
  ],
  [
    "https://apps.apple.com/kr/app/%EB%93%80%EC%98%A4%EB%A7%81%EA%B3%A0-duolingo/id570060128",
    "https://play.google.com/store/search?q=%EB%93%80%EC%98%A4%EB%A7%81%EA%B3%A0&c=apps",
  ],
  [
    "https://apps.apple.com/kr/app/cake-%EC%BC%80%EC%9D%B4%ED%81%AC-%EC%98%81%EC%96%B4%ED%9A%8C%ED%99%94/id1350420987",
    "https://play.google.com/store/apps/details?id=me.mycake",
  ],
  [
    "https://apps.apple.com/kr/app/youbot-%EC%98%81%EC%96%B4%EC%8A%A4%ED%94%BC%ED%82%B9/id1336294900",
    "https://play.google.com/store/apps/details?id=com.qbox.thoting",
  ],
  [
    "https://apps.apple.com/kr/app/%EC%97%98%EC%82%AC-elsa-%EC%98%81%EC%96%B4-%EB%B0%B0%EC%9A%B0%EA%B8%B0-%EB%B0%8F-%EB%A7%90%ED%95%98%EA%B8%B0/id1083804886",
    "https://play.google.com/store/search?q=elsa&c=apps",
  ],
  [
    "https://apps.apple.com/kr/app/%ED%95%B4%EC%BB%A4%EC%8A%A4%ED%86%A0%EC%9D%B5-%EB%B9%85%ED%94%8C-bigple-%EC%9D%B8%EA%B3%B5%EC%A7%80%EB%8A%A5-%ED%86%A0%EC%9D%B5%ED%8A%9C%ED%84%B0/id1370795852",
    "https://play.google.com/store/apps/details?id=com.hackers.app.bigple&hl=en_US&gl=US",
  ],
  [
    "https://apps.apple.com/kr/app/%EB%A9%A4%EB%9D%BC%EC%9D%B4%EC%A6%88%EC%99%80-%ED%95%A8%EA%BB%98-%EC%99%B8%EA%B5%AD%EC%96%B4-%EA%B3%B5%EB%B6%80%ED%95%98%EA%B8%B0/id635966718",
    "https://play.google.com/store/apps/details?id=com.memrise.android.memrisecompanion&hl=ko&gl=US",
  ],
  [
    "https://apps.apple.com/kr/app/mondly-33%EA%B0%9C-%EA%B5%AD%EC%96%B4%EB%A5%BC-%EB%B0%B0%EC%9B%8C-%EB%B3%B4%EC%84%B8%EC%9A%94/id987873536",
    "https://play.google.com/store/apps/details?id=com.atistudios.mondly.languages&hl=ko&gl=US",
  ],
  [
    "https://apps.apple.com/kr/app/ai-tutor/id1492243690",
    "https://play.google.com/store/apps/details?id=lg.cns.aitutor.carrot&hl=ko&gl=US",
  ],
  [
    "https://apps.apple.com/kr/app/%EB%89%B4%EB%A1%9C%EC%A0%9C%ED%83%80%EC%8A%A4%ED%86%A4/id435588892",
    "https://play.google.com/store/apps/details?id=air.com.rosettastone.mobile.CoursePlayer&hl=ko&gl=US",
  ],
  [
    "https://apps.apple.com/us/app/busuu-language-learning/id379968583",
    "https://play.google.com/store/apps/details?id=com.busuu.android.enc&hl=en&gl=US",
  ],
];

var recommendation_list_common = [
  [
    "AI 산타토익",
    "[로그인 필요]</br>1. 로그인후 AI tutor에게 이름을 말해봅니다.</br>2. AI tutor에게 코스를 추천해달라고 요청해봅니다.</br>3. AI tutor가 추천한 코스중 하나를 선택하고, 5단계 학습을 해봅니다.",
  ],
  [
    "Super Chinese",
    "[로그인 필요없음]</br>1. 홈화면에서 레벨테스트를 클릭하여 5분간 학습합니다.</br>2. Level 1에서 학습하고 싶은 메뉴를 고르고 학습을 합니다(기초 중국어/자기소개 중 선택)</br>3. 성조를 녹음해 봅니다.",
  ],
  [
    "플랭",
    "[로그인 필요] </br>1. 오늘의 트레이닝을 클릭합니다.</br>2. 짧은 유튜브 영상을 보고 영작하기를 해봅니다.</br>3. 영작후, 리스닝-스피킹-감상하기를 순서대로 학습해봅니다.",
  ],
  [
    "오픽업",
    "[로그인 필요] </br>1. 홈화면에서 '오늘의 문장' 3문장의 발음 연습을 합니다.(발음연습 버튼을 눌러 한번 듣고- 도전 버튼을 누른 상태에서 녹음을 합니다)</br>2. 설문토픽에서 관심있는 주제 두개를 고르고 학습해봅니다.",
  ],
  [
    "LingoChamp",
    "[로그인 필요]</br>1. 동기, 성별, 관심사 등 기본 사항을 선택합니다.</br>2. '3일 무료체험' 화면에서 좌측 상단 닫기(x) 클릭합니다.</br>3.'나의 영어레벨'을선택하여 간단한 테스트 진행후 레벨을 확인합니다.</br>4. 레벨 확인후 좌측 상단 닫기(x)를 클릭하면, '오늘의 학습 내용' 이 보이는 화면에서 아래로 내려가 ' AI 코치 '를 선택하여 학습합니다.",
  ],
  [
    "이지보카",
    "[로그인 필요없음]</br>1. 단어장 선택을 누릅니다 -> 공부 목적에 맞게 단어장을 선택합니다.</br>2. 'Start'를 눌러 기본학습을 시작합니다. (화면을 터치하면 속도를 조절할 수 있습니다)</br>3. 남은 시간동안 '무료 단어장'을 사용하여 학습해봅니다. ",
  ],
  [
    "말해보카",
    "[로그인 필요없음]</br>1. 오늘의 학습을 클릭합니다 -> 본인의 학습 목적을 선택합니다.</br>2. 20개의 단어 학습을 하고, 나의 영어 어휘력 수준을 파악해봅니다. ",
  ],
  [
    "문정아중국어",
    "[로그인 필요]</br>1. 로그인후 가이드봇이 학습 사용법을 알려줍니다 ('다음' 클릭).</br>2. 1단계 학습: 에피소드(동영상 1분)를 시청하고 단어 따라해 봅니다.</br>3. 2단계 말하기: 중국어 설명과 성조(동영상 1분)에 대한 학습 후 성조를 녹음하며 연습해봅니다.",
  ],
  [
    "듀오링고",
    "[로그인은 선택사항]</br>0. 학습하고 싶은 언어를 하나 고릅니다.</br>1. 간단한 레벨 테스트 단계와 프로필 생성단계를 거칩니다.</br>2. 무료로 할 수 있는 단계 중 하나를 정해 학습합니다.</br>3. 남은 시간동안 학습하고 싶은 부분을 학습해봅니다.",
  ],
  [
    "케이크 영어회화",
    "[로그인 필요없음]</br>0. 학습하고 싶은 언어를 하나 고릅니다.</br>1. 화면 중앙에 보이는 영상 중 학습하고 싶은 영상 하나를 고릅니다.</br>2. 영상 아래에 위치한 박스의 우측 상단에 보이는 'Drill'을 사용해 자막없이 동영상을 한번 시청합니다.</br>3. 배속버튼을 0.75로 하고, 이번엔 자막을 보며 학습합니다.</br>4. 동영상을 2번 시청한 후, '말하기 A레벨에 도전!' 메뉴에서 표현을 따라해봅니다.</br>5. 남은 시간 동안 어플을 탐색하여봅니다. ",
  ],
  [
    "YouBot 영어",
    "[로그인 필요]</br>1. 동영상을 시청합니다.</br>2. INPUT에서 표현학습을 10분정도 해봅니다.</br>3. OUTPUT에서 5분정도 학습합니다.",
  ],
  [
    "ELSA Speak",
    "[로그인 없이 가능 - 로그인 없이 체험은 로그인 화면에서 '건너뛰기' 누르기]</br>0. 모국어를 한국어로 설정한다음 간단한 설문에 응답합니다.</br>1. [제한적인 요금제로 계속이용]을 클릭하여 학습을 시작합니다.</br>2. [미니테스트 시작]을 누릅니다.</br>3. [발음법 입문]을 클릭하여 학습 해 봅니다.</br>4. 남은 시간 동안 어플을 탐색하여봅니다. ",
  ],
  [
    "해커스토익빅플",
    "[로그인 필요]</br>1. 첫 화면에서 해커스 진단테스트를 클릭합니다. (로그인 상태에서만 가능)</br>2. 앞에 5문제 풀어봅니다.</br>3. 답안 제출 후, 취약 유형 확인하고, 시간이 남으면 하나의 취약 유형에 관해서 학습해봅니다.",
  ],
  [
    "멤라이즈(Memrise)",
    "[로그인 필요]</br>1. 배우고 싶은 언어를 선택합니다.</br>2. 구매를 유도하는 창이 뜨면 [Maybe later]를 선택 합니다.</br>3. 첫화면 우측 하단에 [Learn]을 클릭합니다.</br>4. [1 - 단어 및 구분] 또는 [2 - 문법 학습] 무료단계 중 수강하고 싶은 강좌를 골라 수강합니다.",
  ],
  [
    "Mondly",
    "[로그인 필요없음]</br>1. 배우고 싶은 언어와 레벨을 선택하고 '자습서 시작'을 클릭합니다.</br>2. 관심 있는 주제를 선택합니다. </br>3. 7일 무료 체험을 건너 뛰고 학습을 시작합니다.</br>4. 안녕하세요에 '대화'단계를 선택하고, 학습해봅니다.</br>5. 대화단계를 학습하고 메인 메뉴로 나와 '채팅봇 단계'를 눌러서 학습해 봅니다.</br>6. 추가로 5분동안 자신이 원하는 메뉴로 들어가 학습을 진행합니다.",
  ],
  [
    "AI Tutor",
    "[로그인 필요]</br>1. 로그인 후 'AI튜터's Pick, 결정적 그 표현'에서 자신이 학습하고 싶은 주제를 클릭합니다.</br>2. 선택한 주제로 5단계 학습을 해봅니다.</br>3. 추가로 자신이 원하는 주제를 선택해 학습을 진행합니다.",
  ],
  [
    "뉴로제타스톤",
    "[로그인 필요]</br>1. 학습하고 싶은 언어를 선택합니다.</br>2. 학습 목표를 선택합니다.</br>3. 학습 1.1을 진행합니다.</br>4. 추가로 자신이 원하는 메뉴에 들어가서 학습을 진행합니다.",
  ],
  [
    "Busuu",
    "[로그인 필요]</br>1. 언어 학습 여부, 학습 이유를 클릭합니다.</br>2. 원하는 학습 시간에 '15분'을 입력한 후 계속을 클릭합니다.</br>3. 오른쪽 상단에 있는 '건너뛰기'를 클릭합니다 ('7일 무료 체험 시작' 버튼은 광고입니다).</br>4. '학습을 시작하세요'를 클릭합니다.</br>5. 하루에 얻어야 하는 포인트가 채워질 때까지 학습을 진행합니다.",
  ],
];
var user_email = sessionStorage.getItem("user_email");
var user_id = sessionStorage.getItem("user_id");
var rec1 = sessionStorage.getItem("rec1");
var rec2 = sessionStorage.getItem("rec2");
var rec3 = sessionStorage.getItem("rec3");

window.onload = function start() {
  fetch("https://api.airtable.com/v0/appyJbFaZcmTQCGLQ/Table%201/" + user_id, {
    headers: {
      Authorization: "Bearer keyTvIqUQEHqc8ufv",
    },
  })
    .then((response) => {
      if (response.status === 200) {
        return response.json();
      } else {
        throw new Error("Unable ");
      }
    })
    .then((data) => {
      sessionStorage.setItem(
        "rec1",
        data.fields.rec1 === undefined ? 0 : data.fields.rec1
      );
      sessionStorage.setItem(
        "rec2",
        data.fields.rec2 === undefined ? 0 : data.fields.rec2
      );
      sessionStorage.setItem(
        "rec3",
        data.fields.rec3 === undefined ? 0 : data.fields.rec3
      );
      sessionStorage.setItem(
        "type",
        data.fields.type === undefined ? 0 : data.fields.type
      );
    });

  if (user_email !== null) {
    document.getElementById("login_y_n_main").innerHTML = user_email;
    document.getElementById("login_y_n_main").style.fontSize = "18px";
    document.getElementById("login_").innerHTML = user_email.split("@")[0];

    if (rec1 != 0) {
      document.getElementById("app_1").innerHTML =
        recommendation_list_common[rec1 - 1][0] + "<br/>" + "사용 예시";
      document.getElementById("app_1_1").innerHTML =
        "추천된 앱" +
        "<br/>" +
        recommendation_list_common[rec1 - 1][0] +
        " ios 버전";
      document.getElementById("app_1_2").innerHTML =
        "추천된 앱" +
        "<br/>" +
        recommendation_list_common[rec1 - 1][0] +
        " android 버전";
    }

    if (rec2 != 0) {
      document.getElementById("app_2").innerHTML =
        recommendation_list_common[rec2 - 1][0] + "<br/>" + "사용 예시";
      document.getElementById("app_2_1").innerHTML =
        "추천된 앱" +
        "<br/>" +
        recommendation_list_common[rec2 - 1][0] +
        " ios 버전";
      document.getElementById("app_2_2").innerHTML =
        "추천된 앱" +
        "<br/>" +
        recommendation_list_common[rec2 - 1][0] +
        " android 버전";
    }
    if (rec3 != 0) {
      document.getElementById("app_3").innerHTML =
        recommendation_list_common[rec3 - 1][0] + "<br/>" + "사용 예시";
      document.getElementById("app_3_1").innerHTML =
        "추천된 앱" +
        "<br/>" +
        recommendation_list_common[rec3 - 1][0] +
        " ios 버전";
      document.getElementById("app_3_2").innerHTML =
        "추천된 앱" +
        "<br/>" +
        recommendation_list_common[rec3 - 1][0] +
        " android 버전";
    }
  }
};

function login_check() {
  if (user_email !== null) {
    Swal.fire({
      text: "로그아웃 하시겠습니까?",
      icon: "warning",
      showCancelButton: true,
      cancelButtonColor: "#BDBDBD",
      confirmButtonText: "로그아웃",
      cancelButtonText: "취소",
    }).then((result) => {
      if (result.isConfirmed) {
        Swal.fire({
          text: "로그아웃 되었습니다.",
          icon: "success",
          timer: 1500,
        }).then(function () {
          document.getElementById("login_y_n_main").innerHTML = "Log in";
          document.getElementById("login_y_n_main").style.fontSize = "24px";
          document.getElementById("login_").innerHTML = "Log in";
          sessionStorage.clear();
          location.href = "login.html";
        });
      }
    });
  } else {
    location.href = "login.html";
  }
}

function rc_app1() {
  if (user_email !== null) {
    try {
      var rec1 = sessionStorage.getItem("rec1");
      location.href = recommendation_list[rec1 - 1][0];
    } catch (error) {
      Swal.fire({
        icon: "error",
        text: "추천된 앱이 없습니다.",
        timer: 1500,
      });
    }
  } else {
    Swal.fire({
      icon: "error",
      text: "로그인을 해주세요.",
      timer: 1500,
    });
  }
}

function rc_app2() {
  if (user_email !== null) {
    try {
      var rec2 = sessionStorage.getItem("rec2");
      location.href = recommendation_list[rec2 - 1][0];
    } catch (error) {
      Swal.fire({
        icon: "error",
        text: "추천된 앱이 없습니다.",
        timer: 1500,
      });
    }
  } else {
    Swal.fire({
      icon: "error",
      text: "로그인을 해주세요.",
      timer: 1500,
    });
  }
}

function rc_app3() {
  if (user_email !== null) {
    try {
      var rec3 = sessionStorage.getItem("rec3");
      location.href = recommendation_list[rec3 - 1][0];
    } catch (error) {
      Swal.fire({
        icon: "error",
        text: "추천된 앱이 없습니다.",
        timer: 1500,
      });
    }
  } else {
    Swal.fire({
      icon: "error",
      text: "로그인을 해주세요.",
      timer: 1500,
    });
  }
}

function rc_app1_() {
  if (user_email !== null) {
    try {
      var rec1 = sessionStorage.getItem("rec1");
      location.href = recommendation_list[rec1 - 1][1];
    } catch (error) {
      Swal.fire({
        icon: "error",
        text: "추천된 앱이 없습니다.",
        timer: 1500,
      });
    }
  } else {
    Swal.fire({
      icon: "error",
      text: "로그인을 해주세요.",
      timer: 1500,
    });
  }
}

function rc_app2_() {
  if (user_email !== null) {
    try {
      var rec2 = sessionStorage.getItem("rec2");
      location.href = recommendation_list[rec2 - 1][1];
    } catch (error) {
      Swal.fire({
        icon: "error",
        text: "추천된 앱이 없습니다.",
        timer: 1500,
      });
    }
  } else {
    Swal.fire({
      icon: "error",
      text: "로그인을 해주세요.",
      timer: 1500,
    });
  }
}

function rc_app3_() {
  if (user_email !== null) {
    try {
      var rec3 = sessionStorage.getItem("rec3");
      location.href = recommendation_list[rec3 - 1][1];
    } catch (error) {
      Swal.fire({
        icon: "error",
        text: "추천된 앱이 없습니다.",
        timer: 1500,
      });
    }
  } else {
    Swal.fire({
      icon: "error",
      text: "로그인을 해주세요.",
      timer: 1500,
    });
  }
}

function app_click_1() {
  if (user_email !== null) {
    try {
      var rec1 = sessionStorage.getItem("rec1");
      Swal.fire({
        html: recommendation_list_common[rec1 - 1][1],
      });
    } catch (error) {
      Swal.fire({
        icon: "error",
        text: "추천된 앱이 없습니다.",
        timer: 1500,
      });
    }
  }
}

function app_click_2() {
  if (user_email !== null) {
    try {
      var rec2 = sessionStorage.getItem("rec2");
      Swal.fire({ html: recommendation_list_common[rec2 - 1][1] });
    } catch (error) {
      Swal.fire({
        icon: "error",
        text: "추천된 앱이 없습니다.",
        timer: 1500,
      });
    }
  }
}

function app_click_3() {
  if (user_email !== null) {
    try {
      var rec3 = sessionStorage.getItem("rec3");
      Swal.fire({ html: recommendation_list_common[rec3 - 1][1] });
    } catch (error) {
      Swal.fire({
        icon: "error",
        text: "추천된 앱이 없습니다.",
        timer: 1500,
      });
    }
  }
}
